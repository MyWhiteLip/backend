<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <title>菜鸟教程(runoob.com)</title>

  <script type="text/javascript">
    function WebSocketTest()
    {
      if ("WebSocket" in window)
      {
        console.log("您的浏览器支持 WebSocket!");

          // 打开一个 web socket
          var ws = new WebSocket("ws://localhost:8080/ws");

          ws.onopen = function()
          {
            // Web Socket 已连接上，使用 send() 方法发送数据
            //ws.send("发送数据");
            //send里放信息 格式  {“my”：,”user“:,”msg“:}
          ws.send("aa")
          console.log("与服务器建立连接成功！")
        };

        ws.onmessage = function (evt)
        {

          var received_msg = evt.data;
          console.log("接收数据：" + evt.data)
        };

        ws.onclose = function()
        {
          // 关闭 websocket
          alert("连接已关闭...");
        };
      }

      else
      {
        // 浏览器不支持 WebSocket
        alert("您的浏览器不支持 WebSocket!");
      }
    }
  </script>
</head>
<body>
<div>
  <form method="post" action="http://localhost:8080/getuser">
    <input placeholder="用户名" lable="username" name="username">
    <button type="submit">提交</button>
  </form>
</div>
<div id="sse">
  <button onclick="WebSocketTest()" >运行 WebSocket</button>
</div>

</body>
</html>